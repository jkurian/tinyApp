<!DOCTYPE html>
<html lang="en">

<head>
    <% include ./partials/_head %>
</head>

<body>
    <div id="containerFull">
        <header>
            <% include ./partials/_header %>
        </header>
        <table class="table table-nonfluid">
            <thead class="thead thead-dark">
                <tr>
                    <th>URLs</th>
                    <th>Shortened URLs</th>
                    <th>Edit URL</th>
                    <th>Delete URL</th>
                </tr>
            </thead>
            <tbody>
                <% for(let url in urlList) { %>
                    <tr>
                        <td>
                            <%= urlList[url] %>
                        </td>
                        <td>
                            <%= url %>
                        </td>
                        <td>
                            <a href="/urls/<%= url %>">Edit</a>
                        </td>
                        <td>
                            <div class="popup">
                                <form id="deleteURL" method="POST" action="/urls/<%= url %>/delete">
                                    <button type="submit" form="deleteURL" id ="<%= url %>" onClick="deleteURL(this.id)">DeleteURL
                                        <i class="icon-trash icon-small"></i>
                                    </button>
                                    <span class="popuptext" id="myPopup<%= url %>">Deleting forever...</span>
                                </form>
                            </div>
                        </td>
                    </tr>
                    <% }; %>
            </tbody>
        </table>
        <form id='addNewURL' method="GET" action='/urls/new/'>
            <button type='submit' form="addNewURL">Shorten a new URL!</button>
        </form>
    </div>
    <script>
        function deleteURL(id) {
            console.log("CALLING")
            var popup = document.getElementById("myPopup"+id);
            popup.classList.toggle("show");
        }
    </script>
</body>

</html>